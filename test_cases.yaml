name: simple-test
description: shows 3D shapes in motion
before:
  - vm do killall firefox
  - vm open https://webglsamples.org/video/video.html
  - sleep 10

codec: gst.vp8.vaapivp8enc

run:
  test_framerate:
    _framerate: 15, 20, 25, 30, 35, 40, 45
    gst.prop=keyframe-max-dist: 5
    gst.prop=target-bitrate: 4000


record_time: 20

after:
  - vm do killall firefox
---
name: matrix
before:
  - vm do killall firefox 2 > /dev/null
  - vm open $webpage
  - sleep 20
  - xset s off -dpms
  - server exec xset s off -dpms

after:
  - vm do killall firefox
_type: matrix

$webpage:
  #aqua: https://webglsamples.org/aquarium/aquarium.html
  cubemap: https://webglsamples.org/dynamic-cubemap/dynamic-cubemap.html
  still: https://www.redhat.com/

record_time: 30
codec: gst.vp8.vaapivp8enc
matrix:
  framerate: 20, 45, 60
  gst.prop=bitrate: 1000, 10000, 100000
  gst.prop=rate-control: vbr, cbr, cqp
  gst.prop=keyframe-period: 0, 20, 40
