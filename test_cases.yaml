name: vp8_keyframe-max-dist_target-bitrate
description: shows 3D shapes in motion
before:
  - vm do killall firefox
  - vm open https://webglsamples.org/video/video.html
  - sleep 10

codec: gst:vp8

run:
  test1:
    _gst.prop=keyframe-max-dist: 1, 2, 4, 8, 14, 20, 40, 80, 130, 200
    framerate: 30
    gst.prop=target-bitrate: 4000

  test:
    _disabled: true
    _gst.prop=target-bitrate: 1000, 2000, 4000, 8000, 16000, 32000, 64000, 128000, 256000, 512000

record_time: 10

after:
  - vm do killall firefox
---
name: matrix
before:
  - vm do killall firefox
  - vm open $webpage
  - sleep 10
after:
  - vm do killall firefox
_type: matrix

$webpage:
  #aqua: https://webglsamples.org/aquarium/aquarium.html
  cubemap: https://webglsamples.org/dynamic-cubemap/dynamic-cubemap.html
  still: https://www.redhat.com/

record_time: 30
codec: gst.vp8.vaapivp8enc
matrix:
  framerate: 10, 30, 60
  gst.prop=target-bitrate: 1000, 5000, 10000
  gst.prop=rate-control: vbr, cbr, cqp
  gst.prop=keyframe-period: 0, 20, 40
