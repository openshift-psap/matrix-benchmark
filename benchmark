#!/usr/bin/env python3
import time
import yaml
import measurement

# load configuration file
# TODO pass somehow to measurement. Global??
with open("benchmark.yaml", 'r') as f:
    cfg = yaml.safe_load(f)

# load and initialize measurement

# TODO load dynamically
import measurement.test
measurements = [measurement.test.Test()]

for m in measurements:
    m.setup()
for m in measurements:
    m.start()

# TODO do something more useful!
time.sleep(5)

for m in measurements:
    m.stop()
for m in measurements:
    m.collect()

# TODO do some data management
# TODO save to database
