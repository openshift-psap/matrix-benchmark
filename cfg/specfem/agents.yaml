setup:
  machines: local
  listen_on: localhost

plugins:
  specfem:
    build_path: /data/kpouget/specfem3d_globe
    scale_lab_frontend: f13-h20-b03-5039ms.rdu2.scalelab.redhat.com
    scale_lab:
      num_bm_worker_nodes: 7
      num_core_per_node: 4
    openshift:
      go_client_path: /home/kevin/openshift/specfem/specfem-client

machines:
  local:
    # ssh -N -L localhost:1230:$HOST:1230 $SSH_GW
    worker: localhost # (tunnelling $HOST via $SSH_GW)
# ---
measurement_sets:
  all:
    - SpecfemSimpleAgent:
        port: 1234
        mode: local
        wait_collector: true

  collector:
    - Perf_Collect:
        port: 1230
        host: worker
        mode: worker

# --- #

worker:
  port_to_collector: 1230
  measurement_sets:
    - all

collector:
  run_as_collector: True
  measurement_sets:
    - collector

viewer:
  run_as_viewer: True

benchmark:
  run_as_benchmark: True
  measurement_sets:
    - collector
  benchmark:
    script: matrix
